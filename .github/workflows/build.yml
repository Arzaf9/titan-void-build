name: Titanium Forge v3.8 (Hardcore Haswell)

on:
  workflow_dispatch:

jobs:
  core_build:
    runs-on: ubuntu-latest
    container:
      image: voidlinux/voidlinux-musl
      options: --privileged
    steps:
      - name: Install Bash and Tools
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π sh, —Ç–∞–∫ –∫–∞–∫ bash –µ—â–µ –Ω–µ—Ç
        shell: sh
        run: |
          xbps-install -Syy || true
          xbps-install -y xbps ca-certificates
          xbps-install -Syyu -y git bash base-devel binutils curl tar

      - name: Build Core (Pixman, Cairo, Mesa)
        shell: bash
        run: |
          git clone --depth 1 https://github.com/void-linux/void-packages.git /void-packages
          cd /void-packages
          ./xbps-src binary-bootstrap
          
          # üíé 12 TITANIUM FLAGS
          FLAGS="-O3 -march=haswell -mtune=haswell -flto=auto -fno-plt -fno-semantic-interposition -mprefer-vector-width=256 -ftree-vectorize -funroll-loops -floop-nest-optimize -fipa-pta -fdevirtualize-at-ltrans -pipe"
          
          echo "XBPS_CFLAGS=\"$FLAGS\"" >> etc/conf
          echo "XBPS_CXXFLAGS=\"$FLAGS\"" >> etc/conf
          echo 'XBPS_LDFLAGS="-Wl,-O1 -Wl,--as-needed -flto=auto"' >> etc/conf
          echo 'XBPS_ALLOW_RESTRICTED=yes' >> etc/conf
          echo 'XBPS_MAKEJOBS=$(nproc)' >> etc/conf

          # –ü–∞—Ç—á root-–ø—Ä–æ–≤–µ—Ä–∫–∏
          sed -i 's/die "xbps-src cannot be used as root."/return 0/' common/xbps-src/shutils/common.sh
          sed -i 's/echo.*cannot be used as root.*/return 0/' common/xbps-src/shutils/common.sh

          # –°–±–æ—Ä–∫–∞ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞
          for p in pixman cairo mesa wayland libX11 pango; do
            ./xbps-src -E pkg $p
          done

      - name: Upload Core
        uses: actions/upload-artifact@v4
        with:
          name: core-libs
          path: /void-packages/hostdir/binpkgs/*.xbps

  matrix_build:
    needs: core_build
    runs-on: ubuntu-latest
    strategy:
      fail-fast: false
      matrix:
        bucket: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    container:
      image: voidlinux/voidlinux-musl
      options: --privileged
    steps:
      - name: Install Bash and Tools
        shell: sh
        run: |
          xbps-install -Syy || true
          xbps-install -y xbps ca-certificates
          xbps-install -Syyu -y git bash base-devel binutils curl tar

      - name: Build Bucket ${{ matrix.bucket }}
        shell: bash
        run: |
          git clone --depth 1 https://github.com/void-linux/void-packages.git /void-packages
          cd /void-packages
          ./xbps-src binary-bootstrap
          
          FLAGS="-O3 -march=haswell -mtune=haswell -flto=auto -fno-plt -fno-semantic-interposition -mprefer-vector-width=256 -ftree-vectorize -funroll-loops -floop-nest-optimize -fipa-pta -fdevirtualize-at-ltrans -pipe"
          echo "XBPS_CFLAGS=\"$FLAGS\"" >> etc/conf
          echo "XBPS_CXXFLAGS=\"$FLAGS\"" >> etc/conf
          echo 'XBPS_LDFLAGS="-Wl,-O1 -Wl,--as-needed -flto=auto"' >> etc/conf
          echo 'XBPS_ALLOW_RESTRICTED=yes' >> etc/conf
          
          sed -i 's/die "xbps-src cannot be used as root."/return 0/' common/xbps-src/shutils/common.sh

          # –¢–≤–æ–π —Å–ø–∏—Å–æ–∫ (–°–∫—Ä–∏–ø—Ç —Å–∞–º –æ—á–∏—Å—Ç–∏—Ç –≤–µ—Ä—Å–∏–∏)
          RAW_PKGS="7zip-25.01_1 ImageMagick-7.1.2.7_1 MangoHud-0.8.1_2 MesaLib-devel-25.3.3_1 NetworkManager-1.50.0_1 SDL2-2.32.10_1 SDL3-3.2.28_1 SPIRV-LLVM-Translator21-21.1.1_1 Waybar-0.14.0_2 aalib-1.4rc5_3 abseil-cpp-20250512.1_1 acl-2.3.2_1 acpid-2.0.34_4 ada-3.2.1_2 adwaita-icon-theme-49.0_1 alsa-lib-1.2.15.1_1 alsa-plugins-32bit-1.2.12_2 alsa-utils-1.2.15.1_1 android-tools-35.0.2_2 at-spi2-atk-2.56.5_1 at-spi2-core-2.56.5_1 atk-2.56.5_1 atkmm-2.28.3_1 attr-2.5.2_2 autoconf-2.72_1 automake-1.16.5_1 avahi-glib-libs-0.8_9 avahi-libs-0.8_2 base-devel-20181003_2 base-files-0.146_1 base-system-0.114_2 bash-5.3_2 basu-0.2.0_1 bc-1.08.2_1 binutils-2.44_2 binutils-libs-2.44_2 bison-3.8.2_1 brightnessctl-0.5.1_1 brotli-1.2.0_1 btop-1.4.6_1 btrfs-progs-6.11_1 bubblewrap-0.11.0_1 bzip2-1.0.8_2 c-ares-1.34.6_1 ca-certificates-20250419+3.118.1_1 cabextract-1.11_1 cairomm-1.14.5_1 cantarell-fonts-0.303.1_2 cava-0.10.6_1 celt-0.11.3_3 chromaprint-1.5.1_2 chrony-4.8_1 cinnamon-desktop-6.4.2_1 cinnamon-translations-6.4.2_1 clang21-headers-21.1.7_1 cliphist-0.7.0_1 colord-devel-1.4.7_1 coreutils-9.4_3 cpio-2.15_1 cpupower-6.5_8 cryptsetup-2.8.3_1 cups-devel-2.4.13_1 curl-8.18.0_1 dash-0.5.12_2 dbus-1.16.2_2 dbus-glib-0.112_1 dbus-libs-1.16.2_2 dbus-x11-1.16.2_2 dconf-0.40.0_1 ddcutil-2.2.1_1 dejavu-fonts-ttf-2.37_3 desktop-file-utils-0.28_1 device-mapper-2.03.29_1 dhcpcd-10.1.0_1 dialog-1.3.20251001_1 diffutils-3.12_1 dkms-3.2.1_1 dmidecode-3.7_1 dnssec-anchors-20230213_1 dosfstools-4.2_1 double-conversion-3.3.1_1 dracut-107_1 duktape-2.7.0_2 e2fsprogs-1.47.2_1 e2fsprogs-libs-1.47.2_1 earlyoom-1.9.0_1 ed-1.22.1_1 efibootmgr-18_1 elfutils-devel-0.192_2 elogind-252.39_1 enchant2-2.8.14_1 ethtool-6.15_1 eudev-3.2.14_2 eudev-libudev-3.2.14_2 exempi-2.6.6_1 exiv2-0.28.7_1 exo-4.20.0_1 expat-2.7.3_1 f2fs-tools-1.16.0_2 faac-1.30_1 fastfetch-2.58.0_1 fcft-3.3.3_1 fdk-aac-2.0.3_1 ffmpeg6-6.1.3_4 ffplay6-6.1.3_4 figlet-2.2.5_6 file-5.46_2 findutils-4.10.0_1 flex-2.6.4_3 flite-2.2_1 fltk-1.3.9_1 fmt-12.1.0_1 font-alias-1.0.5_1 font-awesome6-6.7.1_1 font-util-1.4.1_1 fontconfig-2.16.0_3 foot-1.25.0_2 freetype-2.14.1_1 frei0r-plugins-1.7.0_1 fribidi-1.0.16_1 fuse-2.9.9_1 fuse3-3.16.2_1 fuzzel-1.14.0_1 fzf-0.67.0_1 gamemode-1.8.2_1 gawk-5.3.2_1 gcc-14.2.1+20250405_4 gcr4-4.4.0.1_2 gd-2.3.3_2 gdbm-1.26_1 gdk-pixbuf-2.42.12_2 gettext-0.22.5_1 gi-docgen-2025.4_2 giflib-5.2.2_1 gir-freedesktop-1.86.0_2 git-2.52.0_1 github-cli-2.86.0_1 glib-2.86.1_2 glib-networking-2.80.1_1 glibc-2.41_1 glibmm-2.66.6_1 glibmm2.68-2.86.0_1 glslang-15.4.0_1 glu-9.0.3_1 glxinfo-9.0.0_2 gmp-6.3.0_1 gnome-themes-extra-3.28_4 gnome-themes-standard-3.28_4 gnupg-2.4.9_1 gnutls-3.8.10_1 gptfdisk-1.0.10_1 graphene-1.10.8_1 graphite-1.3.14_1 graphviz-libs-14.1.1_1 greetd-0.10.3_2 grep-3.12_1 grim-1.5.0_1 groff-1.23.0_1 grub-2.12_2 grub-i386-efi-2.12_2 grub-x86_64-efi-2.12_2 gsettings-desktop-schemas-48.0_1 gsfonts-20200910_1 gspell-1.14.2_1 gst-plugins-bad1-1.26.5_2 gst-plugins-base1-1.26.5_1 gst-plugins-good1-1.26.5_2 gstreamer1-1.26.5_1 gtk+ gtk+3 gtk-layer-shell gtk-update-icon-cache gtk4 gtkmm gtkmm4 gtksourceview gtksourceview4 gvfs-1.56.1_2 gzip-1.14_1 harfbuzz-devel-12.3.0_1 haveged-1.9.19_1 hicolor-icon-theme-0.18_1 highway-1.3.0_1 hwids-0.399_1 hyphen-2.8.8_4 hyphen-en-26.2.0.1_1 i2c-tools-4.4_3 iana-etc-20251030_1 icoutils-0.32.3_1 imath-3.1.9_8 imlib2-1.12.6_1 imv-5.0.1_2 inih-61_1 iniparser-4.2.6_1 inxi-3.3.40.1_1 iproute2-6.18.0_1 iptables-1.8.11_3 iputils-20250605_1 ipw2100-firmware-1.3_6 ipw2200-firmware-3.1_6 irqbalance-1.9.4_1 iso-codes-4.18.0_1 iw-5.19_1 jansson-2.14.1_1 jbigkit-devel-2.2_2 json-c-0.18_1 json-glib-1.10.8_1 jsoncpp-1.9.5_1 kbd-2.9.0_1 kernel-libc-headers-6.14_1 kf6-kcoreaddons-6.21.0_1 kmod-34.2_1 kpartx-0.9.6_1 ladspa-sdk-example-plugins-1.15_3 lame-3.100_2 lcms2-2.17_1 less-685_1 libICE-1.1.2_1 libSM-1.2.6_1 libXau-1.0.12_2 libXaw-1.0.16_1 libXcomposite-0.4.6_1 libXcursor-1.2.3_2 libXdamage-1.1.6_1 libXdmcp-1.1.5_1 libXext-1.3.6_1 libXfixes-6.0.1_1 libXfont2-2.0.7_2 libXft-2.3.9_2 libXi-1.8.2_2 libXinerama-1.1.5_1 libXmu-1.2.1_1 libXpm-3.5.17_1 libXpresent-1.0.1_1 libXrandr-1.5.4_1 libXrender-0.9.12_1 libXt-1.3.1_2 libXtst-1.2.5_2 libXv-1.0.13_2 libXxf86vm-1.1.6_2 libaio-0.3.113_1 libao-1.2.2_4 libaom-3.13.1_1 libarchive-3.8.5_1 libass-0.17.4_1 libassuan-2.5.7_1 libasyncns-0.8_9 libatasmart-0.19_5 libatomic-14.2.1+20250405_4 libavcodec6-6.1.3_4 libavdevice6-6.1.3_4 libavfilter6-6.1.3_4 libavformat6-6.1.3_4 libavif-1.3.0_2 libavutil6-6.1.3_4 libb2-0.98.1_1 libb64-1.2.1_1 libblkid-2.41.2_1 libblockdev-3.3.1_2 libbluray-1.3.4_1 libbpf-1.6.2_1 libbs2b-3.1.0_3 libbytesize-2.10_3 libcaca-0.99.beta20_1 libcamera-0.5.2_1 libcanberra-0.30_15 libcap-2.76_1 libcap-ng-0.8.5_4 libcap-progs-2.76_1 libcddb-1.3.2_9 libcdio-2.2.0_2 libcdio-paranoia-10.2+2.0.1_1 libcdparanoia-10.2_15 libclang-cpp21-21.1.7_1 libclc21-21.1.7_1 libcloudproviders-0.3.6_1 libcolord-1.4.7_1 libcpupower-6.5_8 libcrypto3-3.5.5_1 libcryptsetup-2.8.3_1 libcups-2.4.13_1 libcurl-8.18.0_1 libdatrie-0.2.14_1 libdav1d-1.5.3_1 libdaxctl-70.1_1 libdb-5.3.28_8 libdbusmenu-glib-16.04.0_6 libdbusmenu-gtk3-16.04.0_6 libde265-1.0.16_2 libdebuginfod-0.192_2 libdecor-0.2.4_1 libdeflate-1.25_1 libdispatch-5.10.1_1 libdisplay-info-0.2.0_1 libdjvulibre-3.5.29_1 libdrm-2.4.131_1 libdvdcss-1.4.3_1 libdvdnav-6.1.1_1 libdvdread-6.1.3_1 libebur128-1.2.6_1 libedit-20251016.3.1_1 libefivar-39_1 libelf-0.192_2 libelogind-252.39_1 libepoxy-1.5.10_1 liberation-fonts-ttf-2.1.5_3 libev-4.33_1 libevdev-1.13.4_1 libevent-2.1.12_3 libexif-0.6.25_1 libfdisk-2.41.2_1 libffi-3.3_2 libfftw-3.3.10_3 libfl-devel-2.6.4_3 libflac-1.5.0_1 libfluidsynth-2.4.8_1 libfontenc-1.1.8_1 libfreeglut-3.2.2_1 libgamemode-1.8.2_1 libgbm-25.3.3_1 libgcc-14.2.1+20250405_4 libgcrypt-1.11.1_1 libglib-2.86.1_2 libglvnd-1.7.0_1 libgme-0.6.3_2 libgnomekbd-3.28.1_1 libgomp-14.2.1+20250405_4 libgpg-error-1.55_1 libgpgme-2.0.1_1 libgphoto2-2.5.32_1 libgs-10.06.0_1 libgsf-1.14.52_1 libgsm-1.0.22_2 libgtop-2.41.3_1 libgudev-238_1 libgusb-0.4.9_1 libharfbuzz-12.3.0_1 libhaveged-1.9.19_1 libheif-1.20.2_1 libhunspell1.7-1.7.2_1 libicu78-78.1_1 libid3tag-0.15.1b_8 libidn-1.43_1 libidn2-2.3.4_1 libimagequant-4.4.1_1 libinput-1.28.1_1 libinstpatch-1.1.6_1 libjack-1.9.22_1 libjasper-2.0.25_1 libjbig2dec-0.20_1 libjpeg-turbo-3.1.1_1 libjxl-0.11.1_3 libkeyutils-1.6.3_2 libkmod-34.2_1 libksba-1.6.6_1 liblastlog2-2.41.2_1 libldap-2.6.10_1 libldns-1.9.0_1 libliftoff-0.5.0_1 liblilv-0.24.26_3 libllvm21-21.1.7_1 liblqr-0.4.2_1 liblrdf-0.6.1_2 libltdl-2.4.7_8 liblz4-1.10.0_1 liblzma-5.8.1_1 libmad-0.15.1b_10 libmagic-5.46_2 libmagick-7.1.2.7_1 libmanette-0.2.6_1 libmd4c-0.5.2_1 libmm-glib-1.24.0_1 libmng-2.0.3_2 libmnl-1.0.5_1 libmodplug-0.8.9.0_1 libmount-2.41.2_1 libmpdclient-2.22_1 libmpg123-1.33.3_1 libmspack-0.10.1alpha_1 libmysofa-1.3.2_1 libnatpmp-20230423_1 libndctl-70.1_1 libndp-1.9_1 libnemo-6.4.5_2 libnetfilter_conntrack-1.1.0_1 libnfnetlink-1.0.2_1 libnfs-5.0.3_1 libnftnl-1.3.1_1 libnice-0.1.22_1 libnl3-3.11.0_1 libnm-1.50.0_1 libnotify-0.8.6_1 libnsbmp-0.1.7_1 libnsgif-1.0.0_1 libnuma-2.0.18_1 libnvme-1.16.1_1 libogg-1.3.6_1 libopenal-1.24.3_1 libopencv-4.12.0_2 libopenexr-3.2.1_1 libopenjpeg2-2.5.3_1 libopenmpt-0.8.1_1 libpaper-1.1.29_1 libparted-3.6_1 libpcap-1.10.5_1 libpciaccess-0.18.1_1 libpcre-8.45_3 libpcre2-10.47_1 libpipewire-1.4.9_1 libplacebo-7.351.0_1 libpng-1.6.54_1 libpostproc6-6.1.3_4 libprotobuf-25.2_5 libproxy-0.5.11_1 libpsl-0.21.5_1 libpulseaudio-16.1_2 libpyside6-6.10.0_4 libqt6shadertools-6.10.0_1 libraptor-2.0.16_2 libraqm-0.10.3_1 libreadline8-8.2.010_1 libresvg0-0.46.0_1 librist-0.2.11_1 librsvg-2.59.2_2 librtmp-2.4.20161210_10 librubberband-4.0.0_1 libsamplerate-0.2.2_1 libsane-1.3.1_2 libsasl-2.1.28_2 libseat-0.9.2_1 libseccomp-2.5.5_1 libsecret-0.21.7_1 libsensors-3.6.0_2 libserd-0.32.2_1 libsharpyuv-1.6.0_3 libshiboken6-6.10.0_4 libsigc++-2.12.1_1 libsigc++3-3.4.0_1 libsmartcols-2.41.2_1 libsndfile-1.2.2_2 sndio libsodium-1.0.21_1 libsord-0.16.16_1 libsoup3-3.4.2_1 libsoxr-0.1.3_2 libspa-alsa-1.4.9_1 libspa-audioconvert-1.4.9_1 libspa-audiomixer-1.4.9_1 libspa-control-1.4.9_1 libspa-v4l2-1.4.9_1 libspa-videoconvert-1.4.9_1 libspdlog-1.16.0_1 libspectre-0.2.12_1 libspeex-1.2.1_1 libsrt-1.5.4_2 libsrtp-2.7.0_2 libssh-0.11.3_1 libssh2-1.11.1_1 libssl3-3.5.5_1 libstdc++-14.2.1+20250405_4 libstk-4.6.1_5 libsvt-av1-3.1.2_1 libswresample6-6.1.3_4 libswscale6-6.1.3_4 libtasn1-4.20.0_1 libtdb-1.4.10_3 libthai-0.1.29_1 libtheora-1.1.1_8 libtinysparql-3.10.1_1 libtirpc-1.3.7_2 libtool-2.4.7_8 libtorrent-rasterbar-2.0.10_6 libunbound-1.24.2_1 libunistring-1.0_1 libupower-glib3-1.90.9_2 liburcu-0.15.3_1 libusb-1.0.29_1 libutempter-1.2.1_2 libutf8proc-2.11.2_1 libuuid-2.41.2_1 libva-2.22.0_1 libva-vdpau-driver-0.7.4_4 libvala-0.56.18_2 libvamp-plugin-sdk-2.10.0_2 libvdpau-1.5_1 libvdpau-va-gl-0.4.2_2 libvidstab-1.1.0_2 libvorbis-1.3.7_1 libvpl-2.15.0_1 libvpx-1.13.1_1 libwacom-2.17.0_1 libwavpack-5.7.0_1 libwebkit2gtk41-2.50.4_1 libwebp-1.6.0_3 libwmf-0.2.8.4_18 libwoff2common-1.0.2_1 libwoff2dec-1.0.2_1 libxbps-0.60.6_1 libxcb-1.17.0_1 libxcrypt-4.4.38_1 libxcrypt-compat-4.4.38_1 libxcvt-0.1.3_1 libxfce4panel-4.20.6_1 libxfce4ui-4.20.2_1 libxfce4util-4.20.1_1 libxkbcommon-1.13.1_2 libxkbfile-1.1.3_1 libxkbregistry-1.13.1_2 libxklavier-5.4_3 libxml2-2.13.8_3 libxshmfence-1.3.3_2 libxslt-1.1.43_3 libxxHash-0.8.2_1 libyaml-0.2.5_1 libz3-4.15.4_2 libzbar-0.23.1_9 libzstd-1.5.7_1 linux-base-2023.05.29_1 linux-firmware-amd-20260110_1 linux-firmware-broadcom-20260110_1 linux-firmware-intel-20260110_1 linux-firmware-network-20260110_1 linux-firmware-nvidia-20260110_1 linux6.12-6.12.67_1 lm_sensors-3.6.0_2 lmms-1.2.2_5 lowdown-2.0.4_1 lsof-4.99.5_1 lsp-plugins-1.2.20_2 lua52-5.2.4_12 lua54-5.4.8_1 lv2-1.18.10_2 lvm2-2.03.29_1 lxappearance-0.6.4_2 lzo-2.10_3 m4-1.4.19_1 make-4.4.1_1 mako-1.10.0_1 man-pages-6.15_1 mbedtls-3.6.3_1 mbedtls2-2.28.10_1 mdadm-4.4_1 mdocml-1.14.6_8 mesa-demos-9.0.0_2 mesa-dri-25.3.3_1 mesa-libgallium-25.3.3_1 mesa-opencl-25.3.3_1 mesa-vaapi-25.3.3_1 mesa-vdpau-25.1.9_1 mesa-vulkan-intel-25.3.3_1 mesa-vulkan-lavapipe-25.3.3_1 miniupnpc-2.2.7_1 minizip-1.3_1 mit-krb5-libs-1.21.3_1 mkfontscale-1.2.3_1 mlt7-7.34.1_1 mlt7-data-7.34.1_1 mobile-broadband-provider-info-20250613_1 movit-1.6.3_1 mpfr-4.2.2_1 mpv-0.41.0_1 mtdev-1.1.7_1 mujs-1.2.0_2 nano-8.7_1 ncurses-6.5_2 ncurses-base-6.5_2 ncurses-devel-6.5_2 ncurses-libs-6.5_2 nerd-fonts-symbols-ttf-3.4.0_1 nettle-3.10.2_1 newt-0.52.24_3 nghttp2-1.67.1_1 nghttp3-1.12.0_1 ngtcp2-1.20.0_1 nmap-7.98_2 noto-fonts-emoji-2.051_2 noto-fonts-ttf-2026.01.01_2 noto-fonts-ttf-extra-2026.01.01_2 npth-1.8_1 nspr-4.38.2_1 nss-3.120_1 nvi-1.81.6_19 nvidia470-470.256.02_2 nvidia470-gtklibs-470.256.02_2 nvidia470-libs-470.256.02_2 nwg-bar-0.1.6_1 nwg-launchers-0.7.1.1_1 ocl-icd-2.3.2_2 oniguruma-6.9.10_1 openh264-2.6.0_2 openresolv-3.17.4_1 openssh-10.2p1_1 openssl-3.5.5_1 opus-1.6_1 opusfile-0.12_3 orc-0.4.41_2 os-prober-1.84_1 p11-kit-0.25.10_1 p7zip-25.01_1 pahole-1.31_1 pam-1.5.3_4 pam-base-0.4_3 pam-libs-1.5.3_4 pamixer-1.6_2 pango-xft-1.56.3_2 pangomm-2.46.2_1 pangomm2.48-2.50.0_1 patch-2.7.6_4 pavucontrol-6.2_1 pciutils-3.14.0_1 pcre2-10.47_1 perl-5.42.0_1 pick-4.0.0_1 pinentry-1.3.2_1 pipewire-1.4.9_1 pkg-config-0.29.2_3 playerctl-2.4.1_1 polkit-126_2 popt-1.19_1 portaudio-190600.20161030_6 preload-0.6.4_12 procps-ng-4.0.5_1 public-suffix-2026.01.13_1 pulseaudio-utils-16.1_2 pulsemixer-1.5.1_2 python3-3.14.2_2 python3-Jinja2-3.1.6_2 python3-Markdown-3.6_3 python3-MarkupSafe-3.0.3_2 python3-Pillow-12.1.0_1 python3-Pygments-2.19.2_2 python3-cairo-1.27.0_3 python3-docopt-0.6.2_12 python3-evdev-1.7.1_2 python3-gobject-3.54.2_2 python3-keyutils-0.6_11 python3-packaging-26.0_1 python3-parsing-3.3.2_1 python3-pip-25.3_2 python3-smartypants-2.0.2_2 python3-tkinter-3.14.2_1 python3-toml-0.10.2_6 python3-typogrify-2.1.0_2 python3-yaml-6.0.2_3 qbittorrent-5.1.4_1 qt5-core-5.15.11+20231124_6 qt5-dbus-5.15.11+20231124_6 qt5-gui-5.15.11+20231124_6 qt5-network-5.15.11+20231124_6 qt5-svg-5.15.11+20231124_6 qt5-widgets-5.15.11+20231124_6 qt5-xml-5.15.11+20231124_6 qt5ct-1.9_1 qt6-charts-6.10.0_1 qt6-core-6.10.0_3 qt6-dbus-6.10.0_3 qt6-declarative-6.10.0_3 qt6-gui-6.10.0_3 qt6-imageformats-6.10.0_1 qt6-multimedia-6.10.0_1 qt6-network-6.10.0_3 qt6-opengl-widgets-6.10.0_3 qt6-plugin-tls-openssl-6.10.0_3 qt6-qt5compat-6.10.0_1 qt6-quick3d-6.10.0_2 qt6-quicktimeline-6.10.0_1 qt6-sql-6.10.0_3 qt6-svg-6.10.0_1 qt6-wayland-6.10.0_1 qt6-websockets-6.10.0_1 qt6-widgets-6.10.0_3 qt6-xml-6.10.0_3 rav1e-0.6.6_3 removed-packages-0.1.20260130_1 rnnoise-0.2_1 run-parts-5.23.2_1 runit-2.3.0_2 runit-void-20250212_2 sbc-2.0_1 scrcpy-3.3.1_1 sdl12-compat-1.2.72_2 seatd-0.9.2_1 sed-4.9_1 shaderc-2025.3_1 shadow-4.8.1_3 shared-mime-info-2.4_2 shotcut-25.10.31_1 slang-2.3.2_2 slurp-1.5.0_1 soundtouch-2.3.2_1 sox-14.4.2_11 spandsp-0.0.6_4 spdx-licenses-list-3.27.0_1 speedtest-cli-2.1.3_6 speexdsp-1.2.1_1 sqlite-3.51.2_1 sratom-0.6.18_2 starship-1.24.2_1 startup-notification-0.12_11 stk-data-4.6.1_5 sublime-text4-4200_1 sudo-1.9.17p1_1 sway-1.11_1 swaybg-1.2.1_1 taglib-2.1.1_1 tar-1.35_1 tcl-8.6.14_1 telegram-desktop-6.4.0_2 texinfo-7.1_1 thermald-2.15.10_1 thin-provisioning-tools-1.0.4_1 tiff-4.7.1_2 tk-8.6.14_1 tmux-3.6a_1 tpm2-tss-3.2.0_6 traceroute-2.1.6_1 transmission-4.0.6_1 trousers-0.3.15_2 trousers-devel-0.3.15_2 tslib-1.23_1 ttf-opensans-3.001_1 ttf-ubuntu-font-family-0.83_4 tuigreet-0.9.1_1 twolame-0.4.0_2 tzdata-2025c_1 uchardet-0.0.8_1 udiskie-2.5.8_2 udisks2-2.10.1_1 unzip-6.0_15 usbutils-019_1 util-linux-2.41.2_1 util-linux-common-2.41.2_1 v4l-utils-1.32.0_1 vala-0.56.18_2 viewnior-1.8_2 vmaf-3.0.0_1 void-artwork-20221013_1 void-docs-2025.01.25_1 void-live-audio-0.1.1_1 void-repo-multilib-6_4 volume_key-0.3.12_10 vulkan-loader-1.4.313.0_1 wayland-protocols-1.47_1 webrtc-audio-processing-1.3_1 wget-1.25.0_1 which-2.23_1 wifi-firmware-1.3_4 wine-11.1_1 wine-common-11.1_1 winetricks-20250102_1 wireplumber-0.5.12_1 wl-clipboard-2.2.1_1 wlroots-0.17_1 wlroots0.17-0.17.4_3 wlroots0.19-0.19.2_1 wob-0.16_1 wpa_supplicant-2.11_3 x264-20191217.2245_1 x265-4.1_1 xapps-2.8.8_2 xauth-1.1.5_1 xbps-triggers-0.129_1 xcb-util-0.4.1_1 xcb-util-cursor-0.1.4_1 xcb-util-errors-1.0.1_1 xcb-util-image-0.4.1_1 xcb-util-keysyms-0.4.1_1 xcb-util-renderutil-0.3.10_1 xcb-util-wm-0.4.2_1 xdg-dbus-proxy-0.1.6_1 xdg-desktop-portal-1.20.3_1 xdg-desktop-portal-wlr-0.8.1_1 xdg-utils-1.2.1_1 xdotool-4.20251130.1_1 xdpyinfo-1.3.4_2 xf86-input-libinput-1.5.0_1 xfconf-4.20.0_1 xfsprogs-6.14.0_1 xinit-1.4.4_1 xkbcomp-1.4.7_1 xkeyboard-config-2.45_1 xmessage-1.0.7_1 xorg-minimal-1.2_2 xorg-server-21.1.21_1 xorg-server-xwayland-24.1.8_1 xorgproto-2025.1_1 xprop-1.2.8_1 xrandr-1.5.3_1 xset-1.2.5_2 xtools-0.70_1 xtrans-1.6.0_1 xvidcore-1.3.7_1 xz-5.8.1_1 yad-14.2_1 yyjson-0.12.0_1 zd1211-firmware-1.5_3 zix-0.6.2_1 zlib-1.3.1_1 zoxide-0.9.8_1 zramen-1.0.1_1 zsh-5.9_5 zsh-autosuggestions-0.7.0_1 zsh-completions-0.35.0_2 zsh-syntax-highlighting-0.8.0_1 zstd-1.5.7_1"

          # –û—á–∏—Å—Ç–∫–∞ –∏–º–µ–Ω –ø–∞–∫–µ—Ç–æ–≤ (—É–¥–∞–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π)
          CLEAN_PKGS=""
          for p in $RAW_PKGS; do
            # –£–º–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞: —É–±–∏—Ä–∞–µ—Ç –≤—Å—ë, –Ω–∞—á–∏–Ω–∞—è —Å –ø–µ—Ä–≤–æ–π —Ü–∏—Ñ—Ä—ã –ø–æ—Å–ª–µ –¥–µ—Ñ–∏—Å–∞
            # –ü—Ä–∏–º–µ—Ä: libX11-1.8.12_2 -> libX11
            name=$(echo $p | sed 's/-[0-9].*//')
            CLEAN_PKGS="$CLEAN_PKGS $name"
          done

          # –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –±–∞–∫–µ—Ç–∞–º
          read -ra PKG_ARRAY <<< "$CLEAN_PKGS"
          TOTAL=${#PKG_ARRAY[@]}
          PER_BUCKET=$(( (TOTAL + 9) / 10 ))
          START=$(( (${{ matrix.bucket }} - 1) * PER_BUCKET ))
          MY_PKGS="${PKG_ARRAY[@]:$START:$PER_BUCKET}"

          for pkg in $MY_PKGS; do
            echo "--- START: $pkg ---"
            # -E (ethereal) -f (force)
            ./xbps-src -E pkg $pkg || echo "$pkg" >> /void-packages/failed.txt
          done

      - name: Upload Artifacts
        uses: actions/upload-artifact@v4
        with:
          name: titanium-bucket-${{ matrix.bucket }}
          path: /void-packages/hostdir/binpkgs/*.xbps
